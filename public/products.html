<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mogreen</title>
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="vendor/fontawesome/css/all.min.css" rel="stylesheet">
    <link href="vendor/aos/aos.min.css" rel="stylesheet">
    <link href="vendor/progressive-image/css/progressive-image.css" rel="stylesheet">
    <script src="vendor/progressive-image/js/progressive-image.js" defer></script>
    <link href="assets/css/style.css?version=6" rel="stylesheet">
<style type="text/css">
	
.products-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
}

.products-img > img {
	width: 100%;
}

.products-img:not(.loaded) > img {
	filter: blur(.25em);
    clip-path: polygon(0 0, 0 100%, 100% 100%, 100% 0);
}

.products-img-status {
	background-color: rgba(0,0,0,.8);
	transition: background-color .3s;
}

.products-img.loaded > .products-img-status {
	background-color: rgba(0,0,0,0);
}

</style>
</head>
<body>
	<nav id="navbar" class="navbar navbar-expand-md sticky-top navbar-light bg-light shadow-sm">
		<div class="container px-md-3">
			<a href="#home" class="navbar-brand">mogreen</a>
			<button id="navbarToggler" class="navbar-toggler" type="button" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon d-flex justify-content-center align-items-center"><i class="fas fa-bars"></i></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ms-auto me-0">
					<li class="nav-item px-2 px-md-0"><a class="nav-link text-end" href="#about">About</a></li>
					<li class="nav-item px-2 px-md-0"><a class="nav-link text-end" href="#products">Products</a></li>
					<li class="nav-item px-2 px-md-0"><a class="nav-link text-end" href="#team">Team</a></li>
					<li class="nav-item d-flex">
						<button type="button" class="btn rounded-0 ms-auto ms-md-2 mb-3 mb-md-0" data-bs-toggle="modal" data-bs-target="#modalContact">Contact</button>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<main>
		<section>
			<div class="container py-5">
				<h2>Our Products</h2>
				<div class="products-grid">
					<div class="products-item">
						<div class="products-img position-relative" data-img="async" data-target="products/produk_brokoli.jpg">
							<img src="products/produk_brokoli-sm.jpg" alt="Broccoli">
							<div class="products-img-status position-absolute w-100 h-100 top-0 left-0 d-flex justify-content-center align-items-center text-light">
								<i class="fas fa-circle-notch fa-spin"></i>
							</div>
						</div>
						<div class="products-desc">
							<h3>Broccoli</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
						</div>
					</div>
					<div class="products-item"></div>
					<div class="products-item"></div>
					<div class="products-item"></div>
					<div class="products-item"></div>
					<div class="products-item"></div>
					<div class="products-item"></div>
				</div>
			</div>
		</section>
	</main>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="vendor/fontawesome/js/all.min.js"></script>
<script src="vendor/aos/aos.min.js"></script>
<script src="assets/js/script.js?version=4"></script>
<script type="text/javascript">

class AsyncImg
{
	constructor(elm){
		this.elm = elm;
		this.errorCount = 0;
		this.status = "loading";
		this.loading();
	}

	loading(){
		let img = new Image,
		url = this.elm.getAttribute('data-target') || "",
		imgSM = this.elm.querySelector("img");

		img.srcset = url;
		[...imgSM.attributes].filter(attr => attr.nodeName!="src").forEach(attr => img.setAttribute(attr.nodeName, attr.nodeValue));

		img.onload = () => {
			this.status = "loaded";
			this.elm.insertBefore(img, imgSM.nextSibling);
			this.elm.removeChild(imgSM);
			this.elm.classList.add("loaded");
		};

		img.onerror = () => {
			this.errorCount++;
			if(this.errorCount <= 3){
				this.status = "try";
				setTimeout(() => { this.loading(this.elm); }, 3e3);
			}else{
				this.status = "error";
			}
		};
	}
}

const img = new AsyncImg(document.querySelector("[data-img='async']"));

console.log(img.elm);

</script>
</body>
</html>